<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 9 Vectors | Advanced R Companion</title>
  <meta name="description" content="This is a companion to Advanced R and supplement to Advanced R Solutions." />
  <meta name="generator" content="bookdown 0.17 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 9 Vectors | Advanced R Companion" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a companion to Advanced R and supplement to Advanced R Solutions." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 9 Vectors | Advanced R Companion" />
  
  <meta name="twitter:description" content="This is a companion to Advanced R and supplement to Advanced R Solutions." />
  

<meta name="author" content="R4DS Reading Group" />


<meta name="date" content="2020-05-06" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="names-and-values-1.html"/>
<link rel="next" href="subsetting-1.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/bsTable-3.3.7/bootstrapTable.min.css" rel="stylesheet" />


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<img src="images/r4ds.png" style="width:300px;height:180px;padding-bottom:0px;"></img>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="welcome.html"><a href="welcome.html"><i class="fa fa-check"></i><b>1</b> Welcome</a></li>
<li class="chapter" data-level="2" data-path="names-and-values.html"><a href="names-and-values.html"><i class="fa fa-check"></i><b>2</b> Names and Values</a><ul>
<li class="chapter" data-level="" data-path="names-and-values.html"><a href="names-and-values.html#copy-on-modify"><i class="fa fa-check"></i>2.3 Copy-on-modify</a></li>
<li class="chapter" data-level="" data-path="names-and-values.html"><a href="names-and-values.html#exercises"><i class="fa fa-check"></i>2.2.2 Exercises</a></li>
<li class="chapter" data-level="" data-path="names-and-values.html"><a href="names-and-values.html#function-calls"><i class="fa fa-check"></i>2.3.2 Function calls</a></li>
<li class="chapter" data-level="" data-path="names-and-values.html"><a href="names-and-values.html#lists"><i class="fa fa-check"></i>2.3.3 Lists</a></li>
<li class="chapter" data-level="" data-path="names-and-values.html"><a href="names-and-values.html#character-vectors"><i class="fa fa-check"></i>2.3.5 Character vectors</a></li>
<li class="chapter" data-level="" data-path="names-and-values.html"><a href="names-and-values.html#exercise"><i class="fa fa-check"></i>2.3.6.2 Exercise</a></li>
<li class="chapter" data-level="" data-path="names-and-values.html"><a href="names-and-values.html#object-size"><i class="fa fa-check"></i>2.4.1 Object size</a></li>
<li class="chapter" data-level="" data-path="names-and-values.html"><a href="names-and-values.html#modify-in-place"><i class="fa fa-check"></i>2.5.1 Modify-in-place</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="vectors.html"><a href="vectors.html"><i class="fa fa-check"></i><b>3</b> Vectors</a><ul>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#scalars"><i class="fa fa-check"></i>3.2.1 Scalars</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#missing-values"><i class="fa fa-check"></i>3.2.3 Missing values</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#testing-and-coercion"><i class="fa fa-check"></i>3.2.4 Testing and coercion</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#setting-attributes"><i class="fa fa-check"></i>3.3.1 Setting Attributes</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#setnames"><i class="fa fa-check"></i>3.3.2 setNames</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#dimensions"><i class="fa fa-check"></i>3.3.3 Dimensions</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#s3-atomic-vectors"><i class="fa fa-check"></i>3.4 S3 atomic vectors</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#dates"><i class="fa fa-check"></i>3.4.2 Dates</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#lists-1"><i class="fa fa-check"></i>3.5.1 Lists</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#data-frames-and-tibbles"><i class="fa fa-check"></i>3.6.8 Data frames and tibbles</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#conclusion"><i class="fa fa-check"></i>Conclusion</a><ul>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#vectorized"><i class="fa fa-check"></i>VECTORIZED:</a></li>
<li class="chapter" data-level="" data-path="vectors.html"><a href="vectors.html#non-vectorized"><i class="fa fa-check"></i>NON-VECTORIZED:</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="subsetting.html"><a href="subsetting.html"><i class="fa fa-check"></i><b>4</b> Subsetting</a><ul>
<li class="chapter" data-level="" data-path="subsetting.html"><a href="subsetting.html#introduction"><i class="fa fa-check"></i>4.1 Introduction</a></li>
<li class="chapter" data-level="" data-path="subsetting.html"><a href="subsetting.html#selecting-multiple-elements"><i class="fa fa-check"></i>4.2.1 Selecting multiple elements</a></li>
<li class="chapter" data-level="" data-path="subsetting.html"><a href="subsetting.html#lists-2"><i class="fa fa-check"></i>4.2.2 lists</a></li>
<li><a href="subsetting.html#section">4.3.1 <code>[[</code></a></li>
<li class="chapter" data-level="" data-path="subsetting.html"><a href="subsetting.html#exercise-1"><i class="fa fa-check"></i>4.3.5 Exercise</a></li>
<li class="chapter" data-level="" data-path="subsetting.html"><a href="subsetting.html#missing-and-oob"><i class="fa fa-check"></i>4.3.3 Missing and OOB</a><ul>
<li class="chapter" data-level="" data-path="subsetting.html"><a href="subsetting.html#logical-atomic"><i class="fa fa-check"></i>LOGICAL ATOMIC</a></li>
<li class="chapter" data-level="" data-path="subsetting.html"><a href="subsetting.html#list"><i class="fa fa-check"></i>LIST</a></li>
<li class="chapter" data-level="" data-path="subsetting.html"><a href="subsetting.html#null"><i class="fa fa-check"></i>NULL</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="subsetting.html"><a href="subsetting.html#logical-subsetting"><i class="fa fa-check"></i>4.5.8 Logical subsetting</a></li>
<li class="chapter" data-level="" data-path="subsetting.html"><a href="subsetting.html#boolean-algebra"><i class="fa fa-check"></i>4.5.8 Boolean algebra</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="control-flow.html"><a href="control-flow.html"><i class="fa fa-check"></i><b>5</b> Control Flow</a><ul>
<li class="chapter" data-level="" data-path="control-flow.html"><a href="control-flow.html#vectorised-if"><i class="fa fa-check"></i>5.2.2 Vectorised if</a></li>
<li class="chapter" data-level="" data-path="control-flow.html"><a href="control-flow.html#loops"><i class="fa fa-check"></i>5.3 Loops</a></li>
<li class="chapter" data-level="" data-path="control-flow.html"><a href="control-flow.html#switch-statement"><i class="fa fa-check"></i>5.2.3 switch statement</a></li>
<li class="chapter" data-level="" data-path="control-flow.html"><a href="control-flow.html#common-pitfalls"><i class="fa fa-check"></i>5.3.1 common pitfalls</a></li>
<li class="chapter" data-level="" data-path="control-flow.html"><a href="control-flow.html#exercises-1"><i class="fa fa-check"></i>5.3.3.1 Exercises</a><ul>
<li class="chapter" data-level="" data-path="control-flow.html"><a href="control-flow.html#assignment-to-a-valid-index"><i class="fa fa-check"></i>Assignment to a valid index</a></li>
<li class="chapter" data-level="" data-path="control-flow.html"><a href="control-flow.html#assignment-to-0"><i class="fa fa-check"></i>Assignment to [0]</a></li>
<li class="chapter" data-level="" data-path="control-flow.html"><a href="control-flow.html#empty-index"><i class="fa fa-check"></i>Empty index</a></li>
<li><a href="control-flow.html#impossible-index">Impossible Index <code>[[</code></a></li>
<li><a href="control-flow.html#impossible-index--">Impossible Index <code>[[&lt;-</code></a></li>
<li class="chapter" data-level="" data-path="control-flow.html"><a href="control-flow.html#undefined-name"><i class="fa fa-check"></i>Undefined name</a></li>
<li class="chapter" data-level="" data-path="control-flow.html"><a href="control-flow.html#out-of-bounds"><i class="fa fa-check"></i>Out of Bounds</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="control-flow.html"><a href="control-flow.html#conclusion-1"><i class="fa fa-check"></i>Conclusion</a></li>
<li class="chapter" data-level="" data-path="control-flow.html"><a href="control-flow.html#complexity"><i class="fa fa-check"></i>Complexity</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>6</b> Functions</a><ul>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#primitives"><i class="fa fa-check"></i>6.2.2 Primitives</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercises-2"><i class="fa fa-check"></i>6.2.5.1 Exercises</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#lexical-scoping"><i class="fa fa-check"></i>6.4 Lexical scoping</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#a-fresh-start"><i class="fa fa-check"></i>6.4.3 A fresh start</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#lazy-evaluation"><i class="fa fa-check"></i>6.5 Lazy evaluation</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#promises"><i class="fa fa-check"></i>6.5.1 Promises</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#default-arguments"><i class="fa fa-check"></i>6.5.2 Default arguments</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#missing-arguments"><i class="fa fa-check"></i>6.5.3 Missing arguments</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-2"><i class="fa fa-check"></i>6.5.4.3 Exercise</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-3"><i class="fa fa-check"></i>6.5.4.4 Exercise</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#dot-dot-dot"><i class="fa fa-check"></i>6.6 dot dot dot</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-4"><i class="fa fa-check"></i>6.6.1.2 Exercise</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exit-handlers"><i class="fa fa-check"></i>6.7.4 Exit handlers</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-5"><i class="fa fa-check"></i>6.7.5.4 Exercise</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-6"><i class="fa fa-check"></i>6.7.5.5 Exercise</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#replacement-functions"><i class="fa fa-check"></i>6.8.4 Replacement functions</a></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#exercise-7"><i class="fa fa-check"></i>6.8.6.3 Exercise</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="welcome-1.html"><a href="welcome-1.html"><i class="fa fa-check"></i><b>7</b> Welcome</a></li>
<li class="chapter" data-level="8" data-path="names-and-values-1.html"><a href="names-and-values-1.html"><i class="fa fa-check"></i><b>8</b> Names and Values</a><ul>
<li class="chapter" data-level="" data-path="names-and-values-1.html"><a href="names-and-values-1.html#copy-on-modify-1"><i class="fa fa-check"></i>2.3 Copy-on-modify</a></li>
<li class="chapter" data-level="" data-path="names-and-values-1.html"><a href="names-and-values-1.html#exercises-3"><i class="fa fa-check"></i>2.2.2 Exercises</a></li>
<li class="chapter" data-level="" data-path="names-and-values-1.html"><a href="names-and-values-1.html#function-calls-1"><i class="fa fa-check"></i>2.3.2 Function calls</a></li>
<li class="chapter" data-level="" data-path="names-and-values-1.html"><a href="names-and-values-1.html#lists-3"><i class="fa fa-check"></i>2.3.3 Lists</a></li>
<li class="chapter" data-level="" data-path="names-and-values-1.html"><a href="names-and-values-1.html#character-vectors-1"><i class="fa fa-check"></i>2.3.5 Character vectors</a></li>
<li class="chapter" data-level="" data-path="names-and-values-1.html"><a href="names-and-values-1.html#exercise-8"><i class="fa fa-check"></i>2.3.6.2 Exercise</a></li>
<li class="chapter" data-level="" data-path="names-and-values-1.html"><a href="names-and-values-1.html#object-size-1"><i class="fa fa-check"></i>2.4.1 Object size</a></li>
<li class="chapter" data-level="" data-path="names-and-values-1.html"><a href="names-and-values-1.html#modify-in-place-1"><i class="fa fa-check"></i>2.5.1 Modify-in-place</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="vectors-1.html"><a href="vectors-1.html"><i class="fa fa-check"></i><b>9</b> Vectors</a><ul>
<li class="chapter" data-level="" data-path="vectors-1.html"><a href="vectors-1.html#scalars-1"><i class="fa fa-check"></i>3.2.1 Scalars</a></li>
<li class="chapter" data-level="" data-path="vectors-1.html"><a href="vectors-1.html#missing-values-1"><i class="fa fa-check"></i>3.2.3 Missing values</a></li>
<li class="chapter" data-level="" data-path="vectors-1.html"><a href="vectors-1.html#testing-and-coercion-1"><i class="fa fa-check"></i>3.2.4 Testing and coercion</a></li>
<li class="chapter" data-level="" data-path="vectors-1.html"><a href="vectors-1.html#setting-attributes-1"><i class="fa fa-check"></i>3.3.1 Setting Attributes</a></li>
<li class="chapter" data-level="" data-path="vectors-1.html"><a href="vectors-1.html#setnames-1"><i class="fa fa-check"></i>3.3.2 setNames</a></li>
<li class="chapter" data-level="" data-path="vectors-1.html"><a href="vectors-1.html#dimensions-1"><i class="fa fa-check"></i>3.3.3 Dimensions</a></li>
<li class="chapter" data-level="" data-path="vectors-1.html"><a href="vectors-1.html#s3-atomic-vectors-1"><i class="fa fa-check"></i>3.4 S3 atomic vectors</a></li>
<li class="chapter" data-level="" data-path="vectors-1.html"><a href="vectors-1.html#dates-1"><i class="fa fa-check"></i>3.4.2 Dates</a></li>
<li class="chapter" data-level="" data-path="vectors-1.html"><a href="vectors-1.html#lists-4"><i class="fa fa-check"></i>3.5.1 Lists</a></li>
<li class="chapter" data-level="" data-path="vectors-1.html"><a href="vectors-1.html#data-frames-and-tibbles-1"><i class="fa fa-check"></i>3.6.8 Data frames and tibbles</a></li>
<li class="chapter" data-level="" data-path="vectors-1.html"><a href="vectors-1.html#conclusion-2"><i class="fa fa-check"></i>Conclusion</a><ul>
<li class="chapter" data-level="" data-path="vectors-1.html"><a href="vectors-1.html#vectorized-1"><i class="fa fa-check"></i>VECTORIZED:</a></li>
<li class="chapter" data-level="" data-path="vectors-1.html"><a href="vectors-1.html#non-vectorized-1"><i class="fa fa-check"></i>NON-VECTORIZED:</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="subsetting-1.html"><a href="subsetting-1.html"><i class="fa fa-check"></i><b>10</b> Subsetting</a><ul>
<li class="chapter" data-level="" data-path="subsetting-1.html"><a href="subsetting-1.html#introduction-1"><i class="fa fa-check"></i>4.1 Introduction</a></li>
<li class="chapter" data-level="" data-path="subsetting-1.html"><a href="subsetting-1.html#selecting-multiple-elements-1"><i class="fa fa-check"></i>4.2.1 Selecting multiple elements</a></li>
<li class="chapter" data-level="" data-path="subsetting-1.html"><a href="subsetting-1.html#lists-5"><i class="fa fa-check"></i>4.2.2 lists</a></li>
<li><a href="subsetting-1.html#section-1">4.3.1 <code>[[</code></a></li>
<li class="chapter" data-level="" data-path="subsetting-1.html"><a href="subsetting-1.html#exercise-9"><i class="fa fa-check"></i>4.3.5 Exercise</a></li>
<li class="chapter" data-level="" data-path="subsetting-1.html"><a href="subsetting-1.html#missing-and-oob-1"><i class="fa fa-check"></i>4.3.3 Missing and OOB</a><ul>
<li class="chapter" data-level="" data-path="subsetting-1.html"><a href="subsetting-1.html#logical-atomic-1"><i class="fa fa-check"></i>LOGICAL ATOMIC</a></li>
<li class="chapter" data-level="" data-path="subsetting-1.html"><a href="subsetting-1.html#list-1"><i class="fa fa-check"></i>LIST</a></li>
<li class="chapter" data-level="" data-path="subsetting-1.html"><a href="subsetting-1.html#null-1"><i class="fa fa-check"></i>NULL</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="subsetting-1.html"><a href="subsetting-1.html#logical-subsetting-1"><i class="fa fa-check"></i>4.5.8 Logical subsetting</a></li>
<li class="chapter" data-level="" data-path="subsetting-1.html"><a href="subsetting-1.html#boolean-algebra-1"><i class="fa fa-check"></i>4.5.8 Boolean algebra</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="control-flow-1.html"><a href="control-flow-1.html"><i class="fa fa-check"></i><b>11</b> Control Flow</a><ul>
<li class="chapter" data-level="" data-path="control-flow-1.html"><a href="control-flow-1.html#vectorised-if-1"><i class="fa fa-check"></i>5.2.2 Vectorised if</a></li>
<li class="chapter" data-level="" data-path="control-flow-1.html"><a href="control-flow-1.html#loops-1"><i class="fa fa-check"></i>5.3 Loops</a></li>
<li class="chapter" data-level="" data-path="control-flow-1.html"><a href="control-flow-1.html#switch-statement-1"><i class="fa fa-check"></i>5.2.3 switch statement</a></li>
<li class="chapter" data-level="" data-path="control-flow-1.html"><a href="control-flow-1.html#common-pitfalls-1"><i class="fa fa-check"></i>5.3.1 common pitfalls</a></li>
<li class="chapter" data-level="" data-path="control-flow-1.html"><a href="control-flow-1.html#exercises-4"><i class="fa fa-check"></i>5.3.3.1 Exercises</a><ul>
<li class="chapter" data-level="" data-path="control-flow-1.html"><a href="control-flow-1.html#assignment-to-a-valid-index-1"><i class="fa fa-check"></i>Assignment to a valid index</a></li>
<li class="chapter" data-level="" data-path="control-flow-1.html"><a href="control-flow-1.html#assignment-to-0-1"><i class="fa fa-check"></i>Assignment to [0]</a></li>
<li class="chapter" data-level="" data-path="control-flow-1.html"><a href="control-flow-1.html#empty-index-1"><i class="fa fa-check"></i>Empty index</a></li>
<li><a href="control-flow-1.html#impossible-index-1">Impossible Index <code>[[</code></a></li>
<li><a href="control-flow-1.html#impossible-index---1">Impossible Index <code>[[&lt;-</code></a></li>
<li class="chapter" data-level="" data-path="control-flow-1.html"><a href="control-flow-1.html#undefined-name-1"><i class="fa fa-check"></i>Undefined name</a></li>
<li class="chapter" data-level="" data-path="control-flow-1.html"><a href="control-flow-1.html#out-of-bounds-1"><i class="fa fa-check"></i>Out of Bounds</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="control-flow-1.html"><a href="control-flow-1.html#conclusion-3"><i class="fa fa-check"></i>Conclusion</a></li>
<li class="chapter" data-level="" data-path="control-flow-1.html"><a href="control-flow-1.html#complexity-1"><i class="fa fa-check"></i>Complexity</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="functions-1.html"><a href="functions-1.html"><i class="fa fa-check"></i><b>12</b> Functions</a><ul>
<li class="chapter" data-level="" data-path="functions-1.html"><a href="functions-1.html#primitives-1"><i class="fa fa-check"></i>6.2.2 Primitives</a></li>
<li class="chapter" data-level="" data-path="functions-1.html"><a href="functions-1.html#exercises-5"><i class="fa fa-check"></i>6.2.5.1 Exercises</a></li>
<li class="chapter" data-level="" data-path="functions-1.html"><a href="functions-1.html#lexical-scoping-1"><i class="fa fa-check"></i>6.4 Lexical scoping</a></li>
<li class="chapter" data-level="" data-path="functions-1.html"><a href="functions-1.html#a-fresh-start-1"><i class="fa fa-check"></i>6.4.3 A fresh start</a></li>
<li class="chapter" data-level="" data-path="functions-1.html"><a href="functions-1.html#lazy-evaluation-1"><i class="fa fa-check"></i>6.5 Lazy evaluation</a></li>
<li class="chapter" data-level="" data-path="functions-1.html"><a href="functions-1.html#promises-1"><i class="fa fa-check"></i>6.5.1 Promises</a></li>
<li class="chapter" data-level="" data-path="functions-1.html"><a href="functions-1.html#default-arguments-1"><i class="fa fa-check"></i>6.5.2 Default arguments</a></li>
<li class="chapter" data-level="" data-path="functions-1.html"><a href="functions-1.html#missing-arguments-1"><i class="fa fa-check"></i>6.5.3 Missing arguments</a></li>
<li class="chapter" data-level="" data-path="functions-1.html"><a href="functions-1.html#exercise-10"><i class="fa fa-check"></i>6.5.4.3 Exercise</a></li>
<li class="chapter" data-level="" data-path="functions-1.html"><a href="functions-1.html#exercise-11"><i class="fa fa-check"></i>6.5.4.4 Exercise</a></li>
<li class="chapter" data-level="" data-path="functions-1.html"><a href="functions-1.html#dot-dot-dot-1"><i class="fa fa-check"></i>6.6 dot dot dot</a></li>
<li class="chapter" data-level="" data-path="functions-1.html"><a href="functions-1.html#exercise-12"><i class="fa fa-check"></i>6.6.1.2 Exercise</a></li>
<li class="chapter" data-level="" data-path="functions-1.html"><a href="functions-1.html#exit-handlers-1"><i class="fa fa-check"></i>6.7.4 Exit handlers</a></li>
<li class="chapter" data-level="" data-path="functions-1.html"><a href="functions-1.html#exercise-13"><i class="fa fa-check"></i>6.7.5.4 Exercise</a></li>
<li class="chapter" data-level="" data-path="functions-1.html"><a href="functions-1.html#exercise-14"><i class="fa fa-check"></i>6.7.5.5 Exercise</a></li>
<li class="chapter" data-level="" data-path="functions-1.html"><a href="functions-1.html#replacement-functions-1"><i class="fa fa-check"></i>6.8.4 Replacement functions</a></li>
<li class="chapter" data-level="" data-path="functions-1.html"><a href="functions-1.html#exercise-15"><i class="fa fa-check"></i>6.8.6.3 Exercise</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Advanced R Companion</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="vectors-1" class="section level1">
<h1><span class="header-section-number">Chapter 9</span> Vectors</h1>
<div id="scalars-1" class="section level2 unnumbered">
<h2>3.2.1 Scalars</h2>
<div class="question">
<p>Can you have <code>NA</code> in vector</p>
</div>
<p>Hell yeah!</p>
</div>
<div id="missing-values-1" class="section level2 unnumbered">
<h2>3.2.3 Missing values</h2>
<div class="question">
<p><code>NA</code> is a ‘sentinel’ value for explicit missingness - what does ‘sentinel’ mean?</p>
</div>
<p>A sentinel value (also referred to as a flag value, trip value, rogue value, signal value, or dummy data) is a special value in the context of an algorithm which uses its presence as a condition of termination. Also worth noting two NAs are not equal to each other! For instance, in C++ there’s a special character to identify the end of a string I think another example of a sentinel value might be in surveys where you sometimes see missing data or N/A coded as 999, or 9999 (or maybe just 9)</p>
<p>Another example of a sentinel value might be in surveys where you sometimes see missing data or <code>N/A</code> coded as <code>999</code>, or <code>9999</code> (or maybe just <code>9</code>). The possible values in a column of data might be:</p>
<div class="sourceCode" id="cb346"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb346-1" data-line-number="1"><span class="kw">factor</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">4</span>,<span class="dv">9</span>), <span class="dt">levels =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">9</span>))</a></code></pre></div>
<p>Sentinels are typically employed in situations where it’s easier/preferable to have a collection of values of the same type - represented internally using the same conventions and requiring the same amount of memory - but you also need a way to indicate a special circumstance. So like in the case of survey data you may, for example, see a variable indicating that an individual is <code>999</code> years old but the correct way to interpret that is that the data was not collected.</p>
</div>
<div id="testing-and-coercion-1" class="section level2 unnumbered">
<h2>3.2.4 Testing and coercion</h2>
<div class="question">
<p>Why does the book warn us against using <code>is.vector()</code>, <code>is.atomic()</code> and <code>is.numeric()</code>? [read docs]</p>
</div>
<ul>
<li><code>is.atomic</code> will also return true if <code>NULL</code></li>
<li><code>is.numeric</code> tests if integer or double <strong>NOT</strong> factor, Date, POSIXt, difftime</li>
<li><code>is.vector</code> will return false if it has attributes other than names</li>
</ul>
</div>
<div id="setting-attributes-1" class="section level2 unnumbered">
<h2>3.3.1 Setting Attributes</h2>
<div class="question">
<p>Working in the medical field I have to import SAS files a lot where the column names have to adhere to specific abbreviations so they’re given a label attribute for their full name. What are some other common uses for attributes?</p>
</div>
<p>Hypothesis test attributes!</p>
</div>
<div id="setnames-1" class="section level2 unnumbered">
<h2>3.3.2 setNames</h2>
<div class="question">
<p>We can use <code>setNames</code> to apply different values to each element in a vector. How do we do this for our own custom attribute? The code below does NOT work!</p>
<div class="sourceCode" id="cb347"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb347-1" data-line-number="1">my_vector &lt;-<span class="st"> </span><span class="kw">c</span>(</a>
<a class="sourceLine" id="cb347-2" data-line-number="2">  <span class="kw">structure</span>(<span class="dv">1</span>, <span class="dt">x =</span> <span class="st">&quot;firstatt_1&quot;</span>),</a>
<a class="sourceLine" id="cb347-3" data-line-number="3">  <span class="kw">structure</span>(<span class="dv">2</span>, <span class="dt">x =</span> <span class="st">&quot;firstatt_2&quot;</span>), </a>
<a class="sourceLine" id="cb347-4" data-line-number="4">  <span class="kw">structure</span>(<span class="dv">3</span>, <span class="dt">x =</span> <span class="st">&quot;firstatt_3&quot;</span>)</a>
<a class="sourceLine" id="cb347-5" data-line-number="5">)</a>
<a class="sourceLine" id="cb347-6" data-line-number="6"></a>
<a class="sourceLine" id="cb347-7" data-line-number="7">my_vector &lt;-<span class="st"> </span><span class="kw">setNames</span>(my_vector, <span class="kw">c</span>(<span class="st">&quot;name_1&quot;</span>, <span class="st">&quot;name_2&quot;</span>, <span class="st">&quot;name_3&quot;</span>))</a>
<a class="sourceLine" id="cb347-8" data-line-number="8"></a>
<a class="sourceLine" id="cb347-9" data-line-number="9"><span class="co"># mental model: shouldn&#39;t this should return $names and $x?</span></a>
<a class="sourceLine" id="cb347-10" data-line-number="10"><span class="kw">attributes</span>(my_vector)</a></code></pre></div>
<pre><code>## $names
## [1] &quot;name_1&quot; &quot;name_2&quot; &quot;name_3&quot;</code></pre>
</div>
<p>As soon as you instantiate a vector the attributes are lost. BUT we can store it as a list <em>within</em> the vector to keep them! We can create a custom attribute function and use that with <code>map</code> to add a list inside our dataframe:</p>
<div class="sourceCode" id="cb349"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb349-1" data-line-number="1">custom_attr &lt;-<span class="st"> </span><span class="cf">function</span>(x, my_attr) {</a>
<a class="sourceLine" id="cb349-2" data-line-number="2">  <span class="kw">attr</span>(x, <span class="st">&quot;x&quot;</span>) &lt;-<span class="st"> </span>my_attr</a>
<a class="sourceLine" id="cb349-3" data-line-number="3">  <span class="kw">return</span>(x)</a>
<a class="sourceLine" id="cb349-4" data-line-number="4">}</a>
<a class="sourceLine" id="cb349-5" data-line-number="5"></a>
<a class="sourceLine" id="cb349-6" data-line-number="6">as_tb &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb349-7" data-line-number="7"><span class="st">  </span><span class="kw">tibble</span>(</a>
<a class="sourceLine" id="cb349-8" data-line-number="8">  <span class="dt">one =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>),</a>
<a class="sourceLine" id="cb349-9" data-line-number="9">  <span class="dt">x =</span> <span class="kw">c</span>(<span class="st">&quot;att_1&quot;</span>, <span class="st">&quot;att_2&quot;</span>, <span class="st">&quot;att_3&quot;</span>),</a>
<a class="sourceLine" id="cb349-10" data-line-number="10">  <span class="dt">with_arr =</span> <span class="kw">map2</span>(one, x, <span class="op">~</span><span class="kw">custom_attr</span>(.x, .y))</a>
<a class="sourceLine" id="cb349-11" data-line-number="11">)</a>
<a class="sourceLine" id="cb349-12" data-line-number="12"></a>
<a class="sourceLine" id="cb349-13" data-line-number="13">as_tb<span class="op">$</span>with_arr</a></code></pre></div>
<pre><code>## [[1]]
## [1] 1
## attr(,&quot;x&quot;)
## [1] &quot;att_1&quot;
## 
## [[2]]
## [1] 2
## attr(,&quot;x&quot;)
## [1] &quot;att_2&quot;
## 
## [[3]]
## [1] 3
## attr(,&quot;x&quot;)
## [1] &quot;att_3&quot;</code></pre>
</div>
<div id="dimensions-1" class="section level2 unnumbered">
<h2>3.3.3 Dimensions</h2>
<div class="question">
<p>Because <code>NROW</code> and <code>NCOL</code> don’t return <code>NULL</code> on a one dimensional vector they just seem to me as a more flexible option. When do you <em>have</em> to use <code>ncol</code> and <code>nrow</code>?</p>
</div>
<p>It <em>may</em> be better practice to always use <code>NROW</code> and <code>NCOL</code>!</p>
<div class="question">
<p>As long as the number of rows matches the data frame, it’s also possible to have a matrix or array as a column of a data frame. (This requires a slight extension to our definition of a data frame: it’s not the <code>length()</code> of each column that must be equal, but the <code>NROW()</code>.)</p>
<div class="sourceCode" id="cb351"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb351-1" data-line-number="1">df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>),</a>
<a class="sourceLine" id="cb351-2" data-line-number="2">                 <span class="dt">y =</span> <span class="kw">c</span>(letters[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>]))</a>
<a class="sourceLine" id="cb351-3" data-line-number="3"></a>
<a class="sourceLine" id="cb351-4" data-line-number="4"><span class="kw">length</span>(df<span class="op">$</span>y) <span class="op">==</span><span class="st"> </span><span class="kw">NROW</span>(df<span class="op">$</span>y)</a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>What’s an example of where <code>length() != NROW()</code></p>
</div>
<p>The case of a matrix!</p>
<div class="sourceCode" id="cb353"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb353-1" data-line-number="1">my_matrix &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">6</span></a>
<a class="sourceLine" id="cb353-2" data-line-number="2"><span class="kw">dim</span>(my_matrix) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">2</span>)</a>
<a class="sourceLine" id="cb353-3" data-line-number="3">my_matrix</a></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]    1    4
## [2,]    2    5
## [3,]    3    6</code></pre>
<div class="sourceCode" id="cb355"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb355-1" data-line-number="1"><span class="kw">length</span>(my_matrix) <span class="op">==</span><span class="st"> </span><span class="kw">NROW</span>(my_matrix) <span class="co"># 6 != 3</span></a></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb357"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb357-1" data-line-number="1"><span class="kw">length</span>(my_matrix) <span class="op">==</span><span class="st"> </span><span class="kw">NCOL</span>(my_matrix) <span class="co"># 6 != 2</span></a></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>The length of the matrix is <code>6</code>, and if we manipulate the dimensions of the matrix we see that the NROW is <code>3</code> and and NCOL is <code>2</code>.</p>
</div>
<div id="s3-atomic-vectors-1" class="section level2 unnumbered">
<h2>3.4 S3 atomic vectors</h2>
<div class="question">
<p>How is data type <code>typeof()</code> different from <code>class()</code>?</p>
</div>
<p>Classes are built on top of base types - they’re like special, more specific kinds of types. In fact, if a class isn’t specified then <code>class()</code> will default to either the <code>implicit class</code> or <code>typeof</code>.</p>
<p>So <code>Date</code>, <code>POSIXct</code>, and <code>difftime</code> are specific kinds of doubles, falling under its umbrella.</p>
<div class="sourceCode" id="cb359"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb359-1" data-line-number="1">lubridate<span class="op">::</span><span class="kw">is.Date</span>(<span class="kw">Sys.Date</span>())</a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb361"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb361-1" data-line-number="1"><span class="kw">is.double</span>(<span class="kw">Sys.Date</span>())</a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb363"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb363-1" data-line-number="1">lubridate<span class="op">::</span><span class="kw">is.POSIXct</span>(<span class="kw">Sys.time</span>())</a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb365"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb365-1" data-line-number="1"><span class="kw">is.double</span>(<span class="kw">Sys.time</span>())</a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb367"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb367-1" data-line-number="1">lubridate<span class="op">::</span><span class="kw">is.difftime</span>(<span class="kw">as.difftime</span>(<span class="kw">c</span>(<span class="st">&quot;0:3:20&quot;</span>, <span class="st">&quot;11:23:15&quot;</span>)))</a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb369"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb369-1" data-line-number="1"><span class="kw">is.double</span>(<span class="kw">as.difftime</span>(<span class="kw">c</span>(<span class="st">&quot;0:3:20&quot;</span>, <span class="st">&quot;11:23:15&quot;</span>)))</a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>But then why does <code>my_factor</code> fail to be recognized under its more general <code>integer</code> umbrella?</p>
<div class="sourceCode" id="cb371"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb371-1" data-line-number="1">my_factor &lt;-<span class="st"> </span><span class="kw">factor</span>(<span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>))</a>
<a class="sourceLine" id="cb371-2" data-line-number="2"><span class="kw">is.factor</span>(my_factor)</a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb373"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb373-1" data-line-number="1"><span class="kw">is.integer</span>(my_factor)</a></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="TODO">
<p>XXX</p>
</div>
</div>
<div id="dates-1" class="section level2 unnumbered">
<h2>3.4.2 Dates</h2>
<div class="question">
<p>Why are dates calculated from January 1st, 1970?</p>
</div>
<p>Unix counts time in seconds since its official “birthday,” – called “epoch” in computing terms – which is Jan. 1, 1970. <a href="https://www.wired.com/2001/09/unix-tick-tocks-to-a-billion/">This article</a> explains that the early Unix engineers picked that date arbitrarily, because they needed to set a uniform date for the start of time, and New Year’s Day, 1970, seemed most convenient.</p>
</div>
<div id="lists-4" class="section level2 unnumbered">
<h2>3.5.1 Lists</h2>
<div class="question">
<p>When should you be using <code>list()</code> instead of <code>c()</code></p>
</div>
<p>It’s really contingent on the use case. In the case of adding custom classes it’s worth noting that those are lost once you <code>c()</code> those objects together!</p>
</div>
<div id="data-frames-and-tibbles-1" class="section level2 unnumbered">
<h2>3.6.8 Data frames and tibbles</h2>
<div class="question">
<p>What does ‘lazy’ mean in terms of <code>as_tibble</code>?</p>
</div>
<p>Technically <code>lazy evaluation</code> means that expressions are not evaluated when they are bound to variables, but their evaluation is deferred until their results are needed by other computations. In this context though we think Hadley just meant that it’s treated as a character if it “looks and smells like a character”.</p>
<div class="question">
<p>The solution manual gives the answer and notes:</p>
<div class="sourceCode" id="cb375"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb375-1" data-line-number="1">df_coltypes &lt;-<span class="st"> </span><span class="kw">data.frame</span>(</a>
<a class="sourceLine" id="cb375-2" data-line-number="2">  <span class="dt">a =</span> <span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>),</a>
<a class="sourceLine" id="cb375-3" data-line-number="3">  <span class="dt">b =</span> <span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>),</a>
<a class="sourceLine" id="cb375-4" data-line-number="4">  <span class="dt">c =</span> <span class="kw">c</span>(1L, 0L),</a>
<a class="sourceLine" id="cb375-5" data-line-number="5">  <span class="dt">d =</span> <span class="kw">c</span>(<span class="fl">1.5</span>, <span class="dv">2</span>),</a>
<a class="sourceLine" id="cb375-6" data-line-number="6">  <span class="dt">e =</span> <span class="kw">c</span>(<span class="st">&quot;one&quot;</span> =<span class="st"> </span><span class="dv">1</span>, <span class="st">&quot;two&quot;</span> =<span class="st"> </span><span class="dv">2</span>),</a>
<a class="sourceLine" id="cb375-7" data-line-number="7">  <span class="dt">g =</span> <span class="kw">factor</span>(<span class="kw">c</span>(<span class="st">&quot;f1&quot;</span>, <span class="st">&quot;f2&quot;</span>)),</a>
<a class="sourceLine" id="cb375-8" data-line-number="8">  <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb375-9" data-line-number="9">)</a>
<a class="sourceLine" id="cb375-10" data-line-number="10"></a>
<a class="sourceLine" id="cb375-11" data-line-number="11"><span class="kw">as.matrix</span>(df_coltypes)</a></code></pre></div>
<pre><code>##     a   b       c   d     e   g   
## one &quot;a&quot; &quot;TRUE&quot;  &quot;1&quot; &quot;1.5&quot; &quot;1&quot; &quot;f1&quot;
## two &quot;b&quot; &quot;FALSE&quot; &quot;0&quot; &quot;2.0&quot; &quot;2&quot; &quot;f2&quot;</code></pre>
<p>“Note that <code>format()</code> is applied to the characters, which gives surprising results: <code>TRUE</code> is transformed to <code>&quot; TRUE&quot;</code> (starting with a space!).”</p>
<p>…But where is the <code>format()</code> call happening? I don’t see a space!</p>
</div>
<p>After running <code>debug(as.matrix(df_coltypes))</code> and going down a rabbit hole we found this is a bug that has been addressed! <a href="https://github.com/Tazinho/Advanced-R-Solutions/issues/213">See issue here</a></p>
</div>
<div id="conclusion-2" class="section level2 unnumbered">
<h2>Conclusion</h2>
<div class="question">
<p>How does vectorization make your code faster</p>
</div>
<p>Taking the example from <a href="https://csgillespie.github.io/efficientR/programming.html#vectorised-code">Efficient R Programming</a>:</p>
<div id="vectorized-1" class="section level3 unnumbered">
<h3>VECTORIZED:</h3>
<div class="sourceCode" id="cb377"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb377-1" data-line-number="1"><span class="kw">sum</span>(<span class="kw">log</span>(x))</a></code></pre></div>
</div>
<div id="non-vectorized-1" class="section level3 unnumbered">
<h3>NON-VECTORIZED:</h3>
<div class="sourceCode" id="cb378"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb378-1" data-line-number="1">s &lt;-<span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb378-2" data-line-number="2"><span class="cf">for</span>(x0 <span class="cf">in</span> x) {</a>
<a class="sourceLine" id="cb378-3" data-line-number="3">  s &lt;-<span class="st"> </span>s <span class="op">+</span><span class="st"> </span><span class="kw">log</span>(x0)</a>
<a class="sourceLine" id="cb378-4" data-line-number="4">}</a></code></pre></div>
<p>The vectorized code is faster because it obeys the golden rule of R programming: <em>“access the underlying C/Fortran routines as quickly as possible; the fewer functions calls required to achieve this, the better”</em>.</p>
<ul>
<li>Vectorized Version:
<ol style="list-style-type: decimal">
<li><code>sum</code> [called once]</li>
<li><code>log</code> [called once]</li>
</ol></li>
<li>Non-vectorized:
<ol style="list-style-type: decimal">
<li><code>+</code> [called <code>length(x)</code> times]</li>
<li><code>log</code> [called <code>length(x)</code> times]</li>
</ol></li>
</ul>
<p>In the vectorised version, there are two primitive function calls: one to <code>log</code> (which performs <code>length(x)</code> steps in the C level) and one to <code>sum</code> (which performs <code>x</code> updates in the C level). So you end up doing a similar number of operations at C level regardless of the route.</p>
<p>In the non-vectorised form you are passing the logic back and forth between R and C many many times and this is why the non-vectorised form is much slower.</p>
<p><strong>A vectorized function calls primitives directly, but a loop calls each function <code>length(x)</code> times, and there are <code>1 + length(x)</code> assignments to <code>s</code>. Theres on the order of 3x primitive function calls in the non-vectorised form!!</strong></p>
<p>Resources:</p>
<ul>
<li><p><a href="https://speakerdeck.com/jennybc/row-oriented-workflows-in-r-with-the-tidyverse">Check out Jenny Brian’s slides</a></p></li>
<li><p><a href="https://www.noamross.net/archives/2014-04-16-vectorization-in-r-why/">Great article by Noam Ross</a></p></li>
</ul>
<div class="question">
<p>Putting it all together in a single diagram:</p>
</div>
<p><img src="images/vectors.png" width="952" /></p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="names-and-values-1.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="subsetting-1.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/03-vectors.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["AdvancedR_Companion.pdf", "AdvancedR_Companion.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
